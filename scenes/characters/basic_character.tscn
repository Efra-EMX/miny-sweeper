[gd_scene load_steps=10 format=3 uid="uid://dmumi8ref84wc"]

[ext_resource type="Script" uid="uid://bvfacx4epfw42" path="res://scripts/classes/Character.gd" id="1_3uolt"]
[ext_resource type="Script" uid="uid://cghd6ryeteifh" path="res://scripts/components/MovementComponent.gd" id="3_7x62t"]
[ext_resource type="Script" uid="uid://dblg70lo7213n" path="res://scripts/components/HurtBoxComponent.gd" id="3_xj3fk"]
[ext_resource type="Script" uid="uid://claxjl5bwx5kg" path="res://scripts/components/StatsComponent.gd" id="4_58xif"]
[ext_resource type="Texture2D" uid="uid://da0sf4n8mav6f" path="res://assets/shapes/square.png" id="5_4733v"]
[ext_resource type="Script" uid="uid://b84n6f8b4w5sm" path="res://scripts/misc/Flasher.gd" id="5_k80lu"]
[ext_resource type="Script" uid="uid://cdjdv2lrn2w1j" path="res://scripts/limboai/GenericHSM.gd" id="7_kfmit"]
[ext_resource type="Script" uid="uid://chifrsevdmxr5" path="res://scripts/limboai/GenericState.gd" id="8_b8drn"]

[sub_resource type="CircleShape2D" id="CircleShape2D_jn14c"]
radius = 4.0

[node name="BasicCharacter" type="Node2D" groups=["character", "entity"]]
script = ExtResource("1_3uolt")

[node name="MovementComponent" type="Node" parent="."]
script = ExtResource("3_7x62t")

[node name="StatsComponent" type="Node" parent="." groups=["character", "entity"]]
script = ExtResource("4_58xif")

[node name="Sprite" type="Sprite2D" parent="."]
position = Vector2(2.38419e-07, 2.38419e-07)
texture = ExtResource("5_4733v")

[node name="Flasher" type="Node" parent="Sprite"]
script = ExtResource("5_k80lu")
metadata/_custom_type_script = "uid://b84n6f8b4w5sm"

[node name="HurtBoxComponent" type="Area2D" parent="."]
script = ExtResource("3_xj3fk")

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtBoxComponent"]
shape = SubResource("CircleShape2D_jn14c")
debug_color = Color(0, 1, 0, 0.196078)

[node name="StateMachine" type="LimboHSM" parent="."]
script = ExtResource("7_kfmit")
anystate_transitions = {
"down": NodePath("down"),
"hurt": NodePath("hurt")
}

[node name="idle" type="LimboState" parent="StateMachine"]
script = ExtResource("8_b8drn")
transitions = {
"attack": NodePath("../attack"),
"move": NodePath("../move")
}

[node name="move" type="LimboState" parent="StateMachine"]
script = ExtResource("8_b8drn")
transitions = {
"finished": NodePath("../idle")
}

[node name="attack" type="LimboState" parent="StateMachine"]
script = ExtResource("8_b8drn")
transitions = {
"finished": NodePath("../idle")
}

[node name="hurt" type="LimboState" parent="StateMachine"]
script = ExtResource("8_b8drn")
transitions = {
"finished": NodePath("../idle")
}

[node name="down" type="LimboState" parent="StateMachine"]
script = ExtResource("8_b8drn")
transitions = {}

[connection signal="damage_taken" from="StatsComponent" to="Sprite/Flasher" method="flash" unbinds=1]
